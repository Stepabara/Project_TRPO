<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –ú–æ–±–∏–ª—å–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #1976d2;
            --primary-dark: #1565c0;
            --secondary: #ff6b35;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #2c3e50;
            --text-light: #7f8c8d;
            --border-color: #e1e8ed;
            --radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-hover: 0 8px 24px rgba(0,0,0,0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é */
        .top-menu {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .menu-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            padding: 20px 0;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 5px;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            cursor: pointer;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--primary);
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .user-info:hover {
            background: #f8f9fa;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è */
        .welcome-section {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 40px;
            border-radius: var(--radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
            border-radius: var(--radius) 0 0 var(--radius);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .stat-title {
            font-size: 14px;
            color: var(--text-light);
            font-weight: 500;
        }

        .stat-icon {
            font-size: 20px;
            color: var(--primary);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ */
        .main-section {
            background: white;
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 25px;
        }

        .section-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-color);
            background: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
        }

        .section-body {
            padding: 25px;
        }

        /* –¢–∞–±–ª–∏—Ü—ã */
        .table {
            margin-bottom: 0;
            border-radius: var(--radius);
            overflow: hidden;
        }

        .table th {
            font-weight: 600;
            color: var(--text-color);
            border-bottom: 2px solid var(--border-color);
            padding: 15px;
            background: rgba(25, 118, 210, 0.05);
        }

        .table td {
            padding: 15px;
            vertical-align: middle;
            border-bottom: 1px solid var(--border-color);
        }

        /* –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã */
        .clickable-row {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clickable-row:hover {
            background-color: rgba(25, 118, 210, 0.05) !important;
            transform: translateX(5px);
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 14px;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        /* –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã */
        .search-box {
            position: relative;
        }

        .search-box .form-control {
            border-radius: 8px;
            border: 1px solid var(--border-color);
            padding: 12px 15px 12px 45px;
            transition: all 0.3s ease;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .filters-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal-content {
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
        }

        .modal-header {
            border-bottom: 1px solid var(--border-color);
            padding: 20px 25px;
            background: #f8f9fa;
        }

        .modal-body {
            padding: 25px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow-hover);
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.warning {
            background: var(--warning);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .menu-container {
                flex-direction: column;
                padding: 10px 20px;
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
                margin: 10px 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .welcome-section {
                padding: 30px 20px;
            }

            .filters-row {
                flex-direction: column;
            }

            .filter-group {
                min-width: 100%;
            }
        }

        /* –ë–µ–π–¥–∂–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ */
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ */
        .user-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .user-detail-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: var(--radius);
            border-left: 4px solid var(--primary);
        }

        .user-detail-label {
            font-size: 12px;
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .user-detail-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-color);
        }

        /* –í–∫–ª–∞–¥–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ */
        .modal-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .modal-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-light);
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .modal-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .modal-tab-content {
            display: none;
        }

        .modal-tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤ —Å—Ç—Ä–æ–∫–µ */
        .delete-btn {
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .delete-btn:hover {
            background: var(--danger);
            color: white;
            opacity: 1;
            transform: scale(1.1);
        }

        /* –°–µ–∫—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* –û—Ç—á–µ—Ç—ã */
        .report-card {
            background: white;
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .report-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-color);
        }

        .report-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }

        .chart-container {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */
        .progress {
            height: 8px;
            border-radius: 4px;
            background: #e9ecef;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é -->
    <nav class="top-menu">
        <div class="menu-container">
            <a href="#" class="logo">üì± BryTech Admin</a>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">
                        <i class="fas fa-home"></i>
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('reports')">
                        <i class="fas fa-chart-bar"></i>
                        <span>–û—Ç—á–µ—Ç—ã</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('calls')">
                        <i class="fas fa-phone"></i>
                        <span>–ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤</span>
                    </a>
                </li>
            </ul>

            <div class="user-menu">
                <div class="user-info">
                    <div class="user-avatar">A</div>
                    <div class="user-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                </div>
                <button class="btn btn-sm btn-outline-danger" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section active">
            <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è -->
            <div class="welcome-section">
                <h2 class="welcome-title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º</h2>
                <p class="welcome-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –ø–ª–∞—Ç–µ–∂–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π</p>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                            <div class="stat-value" id="totalClients">0</div>
                        </div>
                        <div class="stat-icon">üë•</div>
                    </div>
                    <div class="stat-description">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å–∏—Å—Ç–µ–º–µ</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                            <div class="stat-value" id="activeClients">0</div>
                        </div>
                        <div class="stat-icon">‚úÖ</div>
                    </div>
                    <div class="stat-description">–° –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–û–±—â–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å</div>
                            <div class="stat-value" id="totalDebt">0 BYN</div>
                        </div>
                        <div class="stat-icon">‚ö†Ô∏è</div>
                    </div>
                    <div class="stat-description">–°—É–º–º–∞ –≤—Å–µ—Ö –¥–æ–ª–≥–æ–≤</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–∏–∫–æ–≤</div>
                            <div class="stat-value" id="debtorsCount">0</div>
                        </div>
                        <div class="stat-icon">üí∏</div>
                    </div>
                    <div class="stat-description">–ö–ª–∏–µ–Ω—Ç–æ–≤ —Å –¥–æ–ª–≥–∞–º–∏</div>
                </div>
            </div>

            <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã -->
            <div class="main-section">
                <div class="section-header">
                    <h3 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã</h3>
                    <button class="btn btn-primary" onclick="showAllClientsModal()">
                        <i class="fas fa-list me-2"></i>–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
                    </button>
                </div>
                <div class="section-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>–§–ò–û</th>
                                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                    <th>–ë–∞–ª–∞–Ω—Å</th>
                                    <th>–¢–∞—Ä–∏—Ñ</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th style="width: 60px;">–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="recentClientsTable">
                                <!-- –ö–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="main-section">
                <div class="section-header">
                    <h3 class="section-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                </div>
                <div class="section-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <button class="btn btn-primary w-100" onclick="showAddClientModal()">
                                <i class="fas fa-user-plus me-2"></i>–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-warning w-100" onclick="showCallModal()">
                                <i class="fas fa-phone me-2"></i>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-info w-100" onclick="chargeSubscription()">
                                <i class="fas fa-credit-card me-2"></i>–°–ø–∏—Å–∞—Ç—å –∞–±–æ–Ω–ø–ª–∞—Ç—É
                            </button>
                       
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reports-section" class="content-section">
            <div class="welcome-section">
                <h2 class="welcome-title">–û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                <p class="welcome-subtitle">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã</p>
            </div>

            <!-- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ -->
            <div class="main-section">
                <div class="section-header">
                    <h3 class="section-title">–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤</h3>
                </div>
                <div class="section-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <button class="btn btn-outline-primary w-100" onclick="exportUsersReport()">
                                <i class="fas fa-file-word me-2"></i>–û—Ç—á–µ—Ç –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-success w-100" onclick="exportCallsReport()">
                                <i class="fas fa-file-word me-2"></i>–û—Ç—á–µ—Ç –ø–æ –≤—Å–µ–º –∑–≤–æ–Ω–∫–∞–º
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-danger w-100" onclick="exportDebtorsReport()">
                                <i class="fas fa-file-word me-2"></i>–û—Ç—á–µ—Ç –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º -->
            <div class="main-section">
                <div class="section-header">
                    <h3 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º</h3>
                </div>
                <div class="section-body">
                    <div id="debtorsReport">
                        <!-- –û—Ç—á–µ—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Calls History Section -->
        <div id="calls-section" class="content-section">
            <div class="welcome-section">
                <h2 class="welcome-title">–ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤</h2>
                <p class="welcome-subtitle">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –∑–≤–æ–Ω–∫–æ–≤ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
            </div>

            <!-- –§–∏–ª—å—Ç—Ä—ã –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤ -->
            <div class="main-section">
                <div class="section-header">
                    <h3 class="section-title">–§–∏–ª—å—Ç—Ä—ã</h3>
                </div>
                <div class="section-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞</label>
                            <input type="text" class="form-control" id="callsPhoneFilter" placeholder="+375...">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">–¢–∏–ø –∑–≤–æ–Ω–∫–∞</label>
                            <select class="form-control" id="callsTypeFilter">
                                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                                <option value="local">–ú–µ—Å—Ç–Ω—ã–µ</option>
                                <option value="international">–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">–î–∞—Ç–∞ —Å</label>
                            <input type="date" class="form-control" id="callsStartDate">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">–î–∞—Ç–∞ –ø–æ</label>
                            <input type="date" class="form-control" id="callsEndDate">
                        </div>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="loadCallsHistory()">
                            <i class="fas fa-search me-2"></i>–ü–æ–∏—Å–∫
                        </button>
                        <button class="btn btn-outline-secondary" onclick="clearCallsFilters()">
                            <i class="fas fa-times me-2"></i>–û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤</div>
                            <div class="stat-value" id="totalCalls">0</div>
                        </div>
                        <div class="stat-icon">üìû</div>
                    </div>
                    <div class="stat-description">–ó–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–ú–µ—Å—Ç–Ω—ã–µ –∑–≤–æ–Ω–∫–∏</div>
                            <div class="stat-value" id="localCalls">0</div>
                        </div>
                        <div class="stat-icon">üè†</div>
                    </div>
                    <div class="stat-description">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–≤–æ–Ω–∫–∏</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ</div>
                            <div class="stat-value" id="internationalCalls">0</div>
                        </div>
                        <div class="stat-icon">üåç</div>
                    </div>
                    <div class="stat-description">–ó–≤–æ–Ω–∫–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div>
                            <div class="stat-title">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
                            <div class="stat-value" id="totalCallsCost">0 BYN</div>
                        </div>
                        <div class="stat-icon">üí∞</div>
                    </div>
                    <div class="stat-description">–°—É–º–º–∞ –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤</div>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤ -->
            <div class="main-section">
                <div class="section-header">
                    <h3 class="section-title">–ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤</h3>
                </div>
                <div class="section-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                                    <th>–ö–ª–∏–µ–Ω—Ç</th>
                                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                    <th>–ù–æ–º–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</th>
                                    <th>–¢–∏–ø</th>
                                    <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                                </tr>
                            </thead>
                            <tbody id="callsHistoryTable">
                                <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–¥–µ—Å—å -->
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <div class="text-muted" id="callsPaginationInfo">
                            –ü–æ–∫–∞–∑–∞–Ω–æ 0 –∏–∑ 0 –∑–∞–ø–∏—Å–µ–π
                        </div>
                        <nav>
                            <ul class="pagination" id="callsPagination">
                                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∑–¥–µ—Å—å -->
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
    <div class="modal fade" id="allClientsModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="filters-row">
                        <div class="filter-group">
                            <div class="search-box">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="searchAllClients" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É...">
                            </div>
                        </div>
                        <div class="filter-group">
                            <select class="form-control" id="statusFilter">
                                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                                <option value="debtor">–î–æ–ª–∂–Ω–∏–∫–∏</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <select class="form-control" id="tariffFilter">
                                <option value="">–í—Å–µ —Ç–∞—Ä–∏—Ñ—ã</option>
                                <option value="standard">–°—Ç–∞–Ω–¥–∞—Ä—Ç</option>
                                <option value="plus+">–ü–ª—é—Å+</option>
                                <option value="Super plus">–°—É–ø–µ—Ä –ø–ª—é—Å</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>–§–ò–û</th>
                                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                    <th>–ë–∞–ª–∞–Ω—Å</th>
                                    <th>–î–æ–ª–≥</th>
                                    <th>–¢–∞—Ä–∏—Ñ</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                                    <th style="width: 60px;">–£–¥–∞–ª–∏—Ç—å</th>
                                </tr>
                            </thead>
                            <tbody id="allClientsTable">
                                <!-- –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="modal fade" id="editUserModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-tabs">
                        <button class="modal-tab active" onclick="showUserTab('info')">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
                        <button class="modal-tab" onclick="showUserTab('finance')">–§–∏–Ω–∞–Ω—Å—ã</button>
                    </div>

                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div id="userInfoTab" class="modal-tab-content active">
                        <div class="user-details-grid">
                            <div class="user-detail-card">
                                <div class="user-detail-label">–§–ò–û</div>
                                <div class="user-detail-value" id="modalUserFio"></div>
                            </div>
                            <div class="user-detail-card">
                                <div class="user-detail-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                                <div class="user-detail-value" id="modalUserPhone"></div>
                            </div>
                            <div class="user-detail-card">
                                <div class="user-detail-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
                                <div class="user-detail-value" id="modalUserRegDate"></div>
                            </div>
                            <div class="user-detail-card">
                                <div class="user-detail-label">–°—Ç–∞—Ç—É—Å</div>
                                <div class="user-detail-value" id="modalUserStatus"></div>
                            </div>
                        </div>

                        <form id="editUserForm">
                            <input type="hidden" id="editUserId">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">–§–ò–û</label>
                                        <input type="text" class="form-control" id="editUserFio" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">–°—Ç–∞—Ç—É—Å</label>
                                        <select class="form-control" id="editUserStatus">
                                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–π</option>
                                            <option value="blocked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</option>
                                            <option value="suspended">–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ª–∏–º–∏—Ç (BYN)</label>
                                <input type="number" class="form-control" id="editUserCreditLimit" step="0.01" min="0">
                            </div>
                        </form>
                    </div>

                    <!-- –§–∏–Ω–∞–Ω—Å—ã -->
                    <div id="userFinanceTab" class="modal-tab-content">
                        <div class="user-details-grid">
                            <div class="user-detail-card">
                                <div class="user-detail-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                                <div class="user-detail-value" id="modalUserBalance"></div>
                            </div>
                            <div class="user-detail-card">
                                <div class="user-detail-label">–ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å</div>
                                <div class="user-detail-value" id="modalUserDebt"></div>
                            </div>
                            <div class="user-detail-card">
                                <div class="user-detail-label">–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ª–∏–º–∏—Ç</div>
                                <div class="user-detail-value" id="modalUserCreditLimit"></div>
                            </div>
                            <div class="user-detail-card">
                                <div class="user-detail-label">–î–æ—Å—Ç—É–ø–Ω—ã–π –∫—Ä–µ–¥–∏—Ç</div>
                                <div class="user-detail-value" id="modalUserAvailableCredit"></div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å (BYN)</label>
                                    <input type="number" class="form-control" id="addBalanceAmount" step="0.01" min="0">
                                </div>
                                <button class="btn btn-success w-100" onclick="addBalanceToUser()">
                                    <i class="fas fa-plus me-2"></i>–ü–æ–ø–æ–ª–Ω–∏—Ç—å
                                </button>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">–°–ø–∏—Å–∞—Ç—å —Å—É–º–º—É (BYN)</label>
                                    <input type="number" class="form-control" id="withdrawBalanceAmount" step="0.01" min="0">
                                </div>
                                <button class="btn btn-warning w-100" onclick="withdrawBalanceFromUser()">
                                    <i class="fas fa-minus me-2"></i>–°–ø–∏—Å–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" onclick="deleteCurrentUser()">
                        <i class="fas fa-trash me-2"></i>–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-primary" onclick="saveUserChanges()">
                        <i class="fas fa-save me-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ -->
    <div class="modal fade" id="addClientModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addClientForm">
                        <div class="mb-3">
                            <label class="form-label">–§–ò–û *</label>
                            <input type="text" class="form-control" id="clientFio" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ *</label>
                            <input type="tel" class="form-control" id="clientPhone" required placeholder="+375291234567">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–ü–∞—Ä–æ–ª—å *</label>
                            <input type="password" class="form-control" id="clientPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å</label>
                            <input type="number" class="form-control" id="clientBalance" value="0" step="0.01">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–¢–∞—Ä–∏—Ñ</label>
                            <select class="form-control" id="clientTariff">
                                <option value="standard">–°—Ç–∞–Ω–¥–∞—Ä—Ç (19.99 BYN)</option>
                                <option value="plus+">–ü–ª—é—Å+ (29.99 BYN)</option>
                                <option value="Super plus">–°—É–ø–µ—Ä –ø–ª—é—Å (35.99 BYN)</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-primary" onclick="addClient()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–∞ -->
    <div class="modal fade" id="callModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="callForm">
                        <div class="mb-3">
                            <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞ *</label>
                            <input type="tel" class="form-control" id="callClientPhone" required placeholder="+375291234567">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–ù–æ–º–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è *</label>
                            <input type="tel" class="form-control" id="callNumber" required placeholder="+375291111111">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–¢–∏–ø –∑–≤–æ–Ω–∫–∞ *</label>
                            <select class="form-control" id="callType" required>
                                <option value="local">–ú–µ—Å—Ç–Ω—ã–π</option>
                                <option value="international">–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫—É–Ω–¥—ã) *</label>
                            <input type="number" class="form-control" id="callDuration" required min="1" value="60">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-primary" onclick="registerCall()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ -->
    <div class="modal fade" id="addPaymentModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addPaymentForm">
                        <div class="mb-3">
                            <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞ *</label>
                            <input type="tel" class="form-control" id="paymentClientPhone" required placeholder="+375291234567">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (BYN) *</label>
                            <input type="number" class="form-control" id="paymentAmount" required step="0.01" min="0.01">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</label>
                            <select class="form-control" id="paymentMethod">
                                <option value="–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</option>
                                <option value="–ù–∞–ª–∏—á–Ω—ã–µ">–ù–∞–ª–∏—á–Ω—ã–µ</option>
                                <option value="–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-success" onclick="processPayment()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let allClients = [];
        let currentEditingUser = null;
        let currentCallsPage = 1;
        const callsPerPage = 10;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            setInterval(loadDashboardData, 30000); // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const today = new Date();
            const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
            
            document.getElementById('callsStartDate').value = firstDay.toISOString().split('T')[0];
            document.getElementById('callsEndDate').value = today.toISOString().split('T')[0];
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞
        async function loadDashboardData() {
            try {
                await loadStatistics();
                await loadRecentClients();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', 'error');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadStatistics() {
            try {
                const response = await fetch('/api/admin/clients');
                const result = await response.json();
                
                if (result.success) {
                    allClients = result.clients;
                    
                    const totalClients = allClients.length;
                    const activeClients = allClients.filter(c => parseFloat(c.balance) >= 0).length;
                    const debtors = allClients.filter(c => parseFloat(c.debt) > 0);
                    const totalDebt = debtors.reduce((sum, d) => sum + parseFloat(d.debt), 0);
                    
                    document.getElementById('totalClients').textContent = totalClients;
                    document.getElementById('activeClients').textContent = activeClients;
                    document.getElementById('debtorsCount').textContent = debtors.length;
                    document.getElementById('totalDebt').textContent = totalDebt.toFixed(2) + ' BYN';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
        async function loadRecentClients() {
            try {
                const response = await fetch('/api/admin/clients');
                const result = await response.json();
                
                if (result.success) {
                    const recentClients = result.clients.slice(0, 5);
                    const tbody = document.getElementById('recentClientsTable');
                    
                    tbody.innerHTML = recentClients.map(client => `
                        <tr class="clickable-row" onclick="editUser('${client._id}')">
                            <td>${client.fio}</td>
                            <td>${client.phone}</td>
                            <td class="${parseFloat(client.balance) < 0 ? 'text-danger' : 'text-success'} fw-bold">
                                ${client.balance}
                            </td>
                            <td>${client.tariff.name}</td>
                            <td>
                                <span class="badge ${parseFloat(client.balance) < 0 ? 'bg-danger' : 'bg-success'}">
                                    ${parseFloat(client.balance) < 0 ? '–î–æ–ª–∂–Ω–∏–∫' : '–ê–∫—Ç–∏–≤–Ω—ã–π'}
                                </span>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); deleteClient('${client._id}', '${client.fio}')">
                                    <i class="fas fa-times"></i>
                                </button>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:', error);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
        async function showAllClientsModal() {
            await loadAllClientsTable();
            const modal = new bootstrap.Modal(document.getElementById('allClientsModal'));
            modal.show();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü—É
        async function loadAllClientsTable(search = '', statusFilter = '', tariffFilter = '') {
            try {
                let filteredClients = allClients;
                
                if (search) {
                    const searchLower = search.toLowerCase();
                    filteredClients = filteredClients.filter(client => 
                        client.fio.toLowerCase().includes(searchLower) || 
                        client.phone.includes(search)
                    );
                }
                
                if (statusFilter === 'debtor') {
                    filteredClients = filteredClients.filter(client => parseFloat(client.debt) > 0);
                } else if (statusFilter === 'active') {
                    filteredClients = filteredClients.filter(client => parseFloat(client.balance) >= 0);
                }
                
                if (tariffFilter) {
                    filteredClients = filteredClients.filter(client => client.tariff.id === tariffFilter);
                }
                
                const tbody = document.getElementById('allClientsTable');
                tbody.innerHTML = filteredClients.map(client => `
                    <tr class="clickable-row" onclick="editUser('${client._id}')">
                        <td>${client.fio}</td>
                        <td>${client.phone}</td>
                        <td class="${parseFloat(client.balance) < 0 ? 'text-danger' : 'text-success'} fw-bold">
                            ${client.balance}
                        </td>
                        <td class="text-danger fw-bold">${client.debt}</td>
                        <td>${client.tariff.name}</td>
                        <td>
                            <span class="badge ${parseFloat(client.balance) < 0 ? 'bg-danger' : 'bg-success'}">
                                ${parseFloat(client.balance) < 0 ? '–î–æ–ª–∂–Ω–∏–∫' : '–ê–∫—Ç–∏–≤–Ω—ã–π'}
                            </span>
                        </td>
                        <td>${client.registrationDate}</td>
                        <td>
                            <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); deleteClient('${client._id}', '${client.fio}')">
                                <i class="fas fa-times"></i>
                            </button>
                        </td>
                    </tr>
                `).join('');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:', error);
            }
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function editUser(userId) {
            try {
                const user = allClients.find(c => c._id === userId);
                if (!user) {
                    showNotification('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    return;
                }

                currentEditingUser = user;

                // –ó–∞–ø–æ–ª–Ω—è–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                document.getElementById('modalUserFio').textContent = user.fio;
                document.getElementById('modalUserPhone').textContent = user.phone;
                document.getElementById('modalUserRegDate').textContent = user.registrationDate;
                document.getElementById('modalUserStatus').textContent = user.status || '–ê–∫—Ç–∏–≤–Ω—ã–π';
                
                // –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Å—Ç—Ä–æ–∫
                const balanceValue = parseFloat(user.balance.replace(' BYN', '')) || 0;
                const debtValue = parseFloat(user.debt.replace(' BYN', '')) || 0;
                const creditLimit = 50; // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π –ª–∏–º–∏—Ç
                
                document.getElementById('modalUserBalance').textContent = user.balance;
                document.getElementById('modalUserDebt').textContent = user.debt;
                document.getElementById('modalUserCreditLimit').textContent = creditLimit + ' BYN';
                
                const availableCredit = Math.max(0, creditLimit + balanceValue);
                document.getElementById('modalUserAvailableCredit').textContent = availableCredit.toFixed(2) + ' BYN';

                // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                document.getElementById('editUserId').value = user._id;
                document.getElementById('editUserFio').value = user.fio;
                document.getElementById('editUserStatus').value = user.status || 'active';
                document.getElementById('editUserCreditLimit').value = creditLimit;

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                const modal = new bootstrap.Modal(document.getElementById('editUserModal'));
                modal.show();

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function saveUserChanges() {
            if (!currentEditingUser) return;

            try {
                const userId = document.getElementById('editUserId').value;
                const fio = document.getElementById('editUserFio').value;
                const status = document.getElementById('editUserStatus').value;
                const creditLimit = document.getElementById('editUserCreditLimit').value;

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                const response = await fetch(`/api/user/settings`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        phone: currentEditingUser.phone,
                        fio: fio,
                        status: status,
                        creditLimit: parseFloat(creditLimit)
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
                    loadDashboardData();
                    
                    const modal = bootstrap.Modal.getInstance(document.getElementById('editUserModal'));
                    modal.hide();
                } else {
                    showNotification(result.error || '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
                }

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:', error);
                showNotification('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π', 'error');
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function deleteCurrentUser() {
            if (!currentEditingUser) return;

            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "${currentEditingUser.fio}"? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.`)) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/clients/${currentEditingUser._id}`, {
                    method: 'DELETE'
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${currentEditingUser.fio} —É–¥–∞–ª–µ–Ω`);
                    loadDashboardData();
                    
                    const modal = bootstrap.Modal.getInstance(document.getElementById('editUserModal'));
                    modal.hide();
                } else {
                    showNotification(result.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                showNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
        async function deleteClient(userId, userName) {
            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "${userName}"? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.`)) {
                return;
            }

            try {
                const response = await fetch(`/api/admin/clients/${userId}`, {
                    method: 'DELETE'
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${userName} —É–¥–∞–ª–µ–Ω`);
                    loadDashboardData();
                } else {
                    showNotification(result.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                showNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
            }
        }

        // –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function addBalanceToUser() {
            if (!currentEditingUser) return;

            const amount = document.getElementById('addBalanceAmount').value;
            if (!amount || amount <= 0) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É', 'error');
                return;
            }

            try {
                const response = await fetch('/api/payment/topup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        phone: currentEditingUser.phone,
                        amount: parseFloat(amount)
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification(`–ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount} BYN`);
                    document.getElementById('addBalanceAmount').value = '';
                    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    editUser(currentEditingUser._id);
                    loadDashboardData();
                } else {
                    showNotification(result.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞', 'error');
            }
        }

        // –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function withdrawBalanceFromUser() {
            if (!currentEditingUser) return;

            const amount = document.getElementById('withdrawBalanceAmount').value;
            if (!amount || amount <= 0) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É', 'error');
                return;
            }

            try {
                const response = await fetch('/api/payment/withdraw', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        phone: currentEditingUser.phone,
                        amount: parseFloat(amount)
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification(`–°–ø–∏—Å–∞–Ω–æ ${amount} BYN`);
                    document.getElementById('withdrawBalanceAmount').value = '';
                    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    editUser(currentEditingUser._id);
                    loadDashboardData();
                } else {
                    showNotification(result.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤:', error);
                showNotification('–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤', 'error');
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        function showUserTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.modal-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById('user' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab').classList.add('active');
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.modal-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
        function showAddClientModal() {
            const modal = new bootstrap.Modal(document.getElementById('addClientModal'));
            modal.show();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
        async function addClient() {
            try {
                const fio = document.getElementById('clientFio').value;
                const phone = document.getElementById('clientPhone').value;
                const password = document.getElementById('clientPassword').value;
                const balance = parseFloat(document.getElementById('clientBalance').value) || 0;
                const tariff = document.getElementById('clientTariff').value;

                if (!fio || !phone || !password) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                    return;
                }

                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fio,
                        phone,
                        password,
                        balance,
                        tariff
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification('–ö–ª–∏–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω');
                    bootstrap.Modal.getInstance(document.getElementById('addClientModal')).hide();
                    document.getElementById('addClientForm').reset();
                    loadDashboardData();
                } else {
                    showNotification(result.message || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞', 'error');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–∞
        function showCallModal() {
            const modal = new bootstrap.Modal(document.getElementById('callModal'));
            modal.show();
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞
        async function registerCall() {
            try {
                const phone = document.getElementById('callClientPhone').value;
                const number = document.getElementById('callNumber').value;
                const callType = document.getElementById('callType').value;
                const duration = parseInt(document.getElementById('callDuration').value);

                if (!phone || !number || !duration || !callType) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }

                const response = await fetch('/api/calls/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        phone,
                        number,
                        duration,
                        callType
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification('–ó–≤–æ–Ω–æ–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    bootstrap.Modal.getInstance(document.getElementById('callModal')).hide();
                    document.getElementById('callForm').reset();
                    loadCallsHistory();
                } else {
                    showNotification(result.error || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–∞', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–∞', 'error');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
        function showAddPaymentModal() {
            const modal = new bootstrap.Modal(document.getElementById('addPaymentModal'));
            modal.show();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
        async function processPayment() {
            try {
                const phone = document.getElementById('paymentClientPhone').value;
                const amount = parseFloat(document.getElementById('paymentAmount').value);
                const method = document.getElementById('paymentMethod').value;

                if (!phone || !amount || amount <= 0) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'error');
                    return;
                }

                const response = await fetch('/api/payment/topup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        phone,
                        amount,
                        method
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification(`–ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount} BYN`);
                    bootstrap.Modal.getInstance(document.getElementById('addPaymentModal')).hide();
                    document.getElementById('addPaymentForm').reset();
                    loadDashboardData();
                } else {
                    showNotification(result.error || '–û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞', 'error');
            }
        }

        // –°–ø–∏—Å–∞–Ω–∏–µ –∞–±–æ–Ω–µ–Ω—Ç—Å–∫–æ–π –ø–ª–∞—Ç—ã
        async function chargeSubscription() {
            try {
                const response = await fetch('/api/admin/charge-subscription', {
                    method: 'POST'
                });
                const result = await response.json();
                
                if (result.success) {
                    showNotification(result.message);
                    loadDashboardData();
                } else {
                    showNotification(result.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è –∞–±–æ–Ω–µ–Ω—Ç—Å–∫–æ–π –ø–ª–∞—Ç—ã:', error);
                showNotification('–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è –∞–±–æ–Ω–µ–Ω—Ç—Å–∫–æ–π –ø–ª–∞—Ç—ã', 'error');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤
        async function loadCallsHistory(page = 1) {
            try {
                currentCallsPage = page;
                const phone = document.getElementById('callsPhoneFilter').value;
                const callType = document.getElementById('callsTypeFilter').value;
                const startDate = document.getElementById('callsStartDate').value;
                const endDate = document.getElementById('callsEndDate').value;

                let url = `/api/admin/calls?page=${page}&limit=${callsPerPage}`;
                
                if (phone) url += `&phone=${encodeURIComponent(phone)}`;
                if (callType) url += `&callType=${callType}`;
                if (startDate) url += `&startDate=${startDate}`;
                if (endDate) url += `&endDate=${endDate}`;

                const response = await fetch(url);
                const result = await response.json();

                if (result.success) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    document.getElementById('totalCalls').textContent = result.totalCalls;
                    document.getElementById('localCalls').textContent = result.localCalls;
                    document.getElementById('internationalCalls').textContent = result.internationalCalls;
                    document.getElementById('totalCallsCost').textContent = result.totalCost.toFixed(2) + ' BYN';

                    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É
                    const tbody = document.getElementById('callsHistoryTable');
                    tbody.innerHTML = result.calls.map(call => `
                        <tr>
                            <td>${call.date}</td>
                            <td>${call.userFio}</td>
                            <td>${call.phone}</td>
                            <td>${call.number}</td>
                            <td>
                                <span class="badge ${call.callType === 'local' ? 'bg-primary' : 'bg-warning'}">
                                    ${call.callType === 'local' ? '–ú–µ—Å—Ç–Ω—ã–π' : '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π'}
                                </span>
                            </td>
                            <td>${Math.floor(call.duration / 60)}:${(call.duration % 60).toString().padStart(2, '0')}</td>
                            <td class="fw-bold">${call.cost.toFixed(2)} BYN</td>
                        </tr>
                    `).join('');

                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é
                    updateCallsPagination(result.totalPages, page);
                    document.getElementById('callsPaginationInfo').textContent = 
                        `–ü–æ–∫–∞–∑–∞–Ω–æ ${result.calls.length} –∏–∑ ${result.totalCalls} –∑–∞–ø–∏—Å–µ–π`;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤', 'error');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤
        function updateCallsPagination(totalPages, currentPage) {
            const pagination = document.getElementById('callsPagination');
            pagination.innerHTML = '';

            // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
            const prevLi = document.createElement('li');
            prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
            prevLi.innerHTML = `<a class="page-link" href="#" onclick="loadCallsHistory(${currentPage - 1})">–ù–∞–∑–∞–¥</a>`;
            pagination.appendChild(prevLi);

            // –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
            for (let i = 1; i <= totalPages; i++) {
                const li = document.createElement('li');
                li.className = `page-item ${i === currentPage ? 'active' : ''}`;
                li.innerHTML = `<a class="page-link" href="#" onclick="loadCallsHistory(${i})">${i}</a>`;
                pagination.appendChild(li);
            }

            // –ö–Ω–æ–ø–∫–∞ "–í–ø–µ—Ä–µ–¥"
            const nextLi = document.createElement('li');
            nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
            nextLi.innerHTML = `<a class="page-link" href="#" onclick="loadCallsHistory(${currentPage + 1})">–í–ø–µ—Ä–µ–¥</a>`;
            pagination.appendChild(nextLi);
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏—Å—Ç–æ—Ä–∏–∏ –∑–≤–æ–Ω–∫–æ–≤
        function clearCallsFilters() {
            document.getElementById('callsPhoneFilter').value = '';
            document.getElementById('callsTypeFilter').value = '';
            
            const today = new Date();
            const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
            
            document.getElementById('callsStartDate').value = firstDay.toISOString().split('T')[0];
            document.getElementById('callsEndDate').value = today.toISOString().split('T')[0];
            
            loadCallsHistory(1);
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤
        async function exportUsersReport() {
            try {
                showNotification('–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞...', 'warning');
                
                const response = await fetch('/api/reports/users/word');
                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
                }
                
                const blob = await response.blob();
                
                const downloadUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.download = `users_report_${new Date().toISOString().split('T')[0]}.doc`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(downloadUrl);
                
                showNotification('–û—Ç—á–µ—Ç –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç—á–µ—Ç–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞', 'error');
            }
        }

        async function exportCallsReport() {
            try {
                showNotification('–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞...', 'warning');
                
                const response = await fetch('/api/reports/calls/word');
                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
                }
                
                const blob = await response.blob();
                
                const downloadUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.download = `calls_report_${new Date().toISOString().split('T')[0]}.doc`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(downloadUrl);
                
                showNotification('–û—Ç—á–µ—Ç –ø–æ –∑–≤–æ–Ω–∫–∞–º —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç—á–µ—Ç–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞', 'error');
            }
        }

        async function exportDebtorsReport() {
            try {
                showNotification('–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞...', 'warning');
                
                const response = await fetch('/api/reports/debtors/word');
                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
                }
                
                const blob = await response.blob();
                
                const downloadUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.download = `debtors_report_${new Date().toISOString().split('T')[0]}.doc`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(downloadUrl);
                
                showNotification('–û—Ç—á–µ—Ç –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç—á–µ—Ç–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞', 'error');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–µ–∫—Ü–∏–∏
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById(sectionName + '-section').style.display = 'block';
            event.target.classList.add('active');
            
            if (sectionName === 'reports') {
                loadDebtorsReport();
            } else if (sectionName === 'calls') {
                loadCallsHistory();
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–∞ –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º
        async function loadDebtorsReport() {
            try {
                const response = await fetch('/api/reports/debtors');
                const result = await response.json();
                
                if (result.success) {
                    const container = document.getElementById('debtorsReport');
                    container.innerHTML = `
                        <div class="report-card">
                            <div class="report-header">
                                <div class="report-title">–û—Ç—á–µ—Ç –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º</div>
                                <div class="report-value">${result.totalDebtors} –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>–û–±—â–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å:</strong> ${result.totalDebt}</p>
                                </div>
                            </div>
                            <div class="table-responsive mt-3">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>–§–ò–û</th>
                                            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                            <th>–ë–∞–ª–∞–Ω—Å</th>
                                            <th>–î–æ–ª–≥</th>
                                            <th>–¢–∞—Ä–∏—Ñ</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${result.debtors.map(debtor => `
                                            <tr>
                                                <td>${debtor.fio}</td>
                                                <td>${debtor.phone}</td>
                                                <td class="text-danger">${debtor.balance}</td>
                                                <td class="text-danger fw-bold">${debtor.debt}</td>
                                                <td>${debtor.tariff}</td>
                                                <td>${debtor.status}</td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç—á–µ—Ç–∞ –ø–æ –¥–æ–ª–∂–Ω–∏–∫–∞–º:', error);
            }
        }

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // –í—ã—Ö–æ–¥
        function logout() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                window.location.href = '/';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
        document.getElementById('searchAllClients').addEventListener('input', function(e) {
            const search = e.target.value;
            const statusFilter = document.getElementById('statusFilter').value;
            const tariffFilter = document.getElementById('tariffFilter').value;
            loadAllClientsTable(search, statusFilter, tariffFilter);
        });

        document.getElementById('statusFilter').addEventListener('change', function(e) {
            const search = document.getElementById('searchAllClients').value;
            const statusFilter = e.target.value;
            const tariffFilter = document.getElementById('tariffFilter').value;
            loadAllClientsTable(search, statusFilter, tariffFilter);
        });

        document.getElementById('tariffFilter').addEventListener('change', function(e) {
            const search = document.getElementById('searchAllClients').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const tariffFilter = e.target.value;
            loadAllClientsTable(search, statusFilter, tariffFilter);
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–∫—Ü–∏–π
        document.querySelectorAll('.content-section').forEach(section => {
            if (section.id !== 'dashboard-section') {
                section.style.display = 'none';
            }
        });
    </script>
</body>
</html>